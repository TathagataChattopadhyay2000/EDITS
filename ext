getPostQuantilesNormal <- function(
    method_name,
    quantiles,
    scenario_data,
    calc_differences = NULL,
    j_parameters,
    j_model_file,
    j_data,
    n_mcmc_iterations = 1e4,
    save_path         = NULL,
    save_trial        = NULL
) {
  if (!identical(method_name, "bhm_normal")) {
    stop("getPostQuantilesNormal currently only supports method_name = 'bhm_normal'")
  }
  
  trials   <- scenario_data$trials
  n_trials <- length(trials)
  
  if (is.null(save_trial) && !is.null(save_path)) {
    save_trial <- sample(seq_len(n_trials), size = 1)
  }
  
  out <- vector("list", n_trials)
  
  for (t in seq_len(n_trials)) {
    y_list <- trials[[t]]$y_list
    out[[t]] <- getPostQuantilesOfTrialNormal(
      y_list           = y_list,
      j_data           = j_data,
      j_parameters     = j_parameters,
      j_model_file     = j_model_file,
      method_name      = method_name,
      quantiles        = quantiles,
      calc_differences = calc_differences,
      n_mcmc_iterations = n_mcmc_iterations,
      save_path        = save_path,
      save_trial       = if (!is.null(save_trial) && t == save_trial) t else NULL
    )
  }
  
  out
}

 scene <- simulateScenariosNormal(
+   n_subjects_list = list(c(200,200)),
+   mean_list = list(c(1,0)),
+   sd = 1,
+   n_trials = 1)
> analysis <- performAnalysesNormal(
+   scenario_list = scene,
+   evidence_levels = c(0.025, 0.5, 0.975),
+   calc_differences = c(2,1),
+   n_mcmc_iterations = 200,
+   verbose = TRUE
+ )
21-Jan-2026 Performing Analyses (normal endpoint)
   Analyzing 1 scenario (1 unique trial realization)
   Running bhm_normal model ...
Error in getPostQuantilesNormal(quantiles = quantiles, scenario_list = scenario_list,  : 
  unused arguments (scenario_list = scenario_list, n_subjects_unique = n_subjects_unique, j_data_fixed = j_data_fixed)
> 
